<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
  <!-- CSS -->
  <script src="https://kit.fontawesome.com/7fb5f730fc.js" crossorigin="anonymous"></script>
  <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth.css" />
  <link rel="stylesheet" href="css/style.css">

  <title>User Profile</title>

  <style>
    .break {
      padding-top: 5em;
    }

    .break2 {
      padding-top: 2em;
    }

    .center {
      text-align: center;
      float: center;

    }

    .max100 {
      max-width: 100%;
    }
  </style>
</head>

<body>

  <!-- Navigation Menu -->
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <nav class="navbar fixed-top navbar-expand-lg navbar-light bg-white">
          <div class="container-fluid">
            <a class="navbar-brand" href="#"><img src="images/rebook3.jpg" alt=""></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
              data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
              aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="#">HOME</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#">User Profile</a>
                </li>
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                    data-bs-toggle="dropdown" aria-expanded="false">
                    MY ACCOUNT
                  </a>
                  <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <li><a class="dropdown-item" href="#">Action</a></li>
                    <li><a class="dropdown-item" href="#">Another action</a></li>
                    <li>
                      <hr class="dropdown-divider">
                    </li>
                    <li><a class="dropdown-item" href="#">Something else here</a></li>
                  </ul>
                </li>
              </ul>
              <form class="d-flex">
                <input class="form-control me-2" type="search" placeholder="Search for Books" aria-label="Search">
                <button class="btn btn-dark" type="submit"><i class="fas fa-search"></i></button>
              </form>
            </div>
          </div>
        </nav>
      </div>
    </div>
  </div>

  <div class="break"> </div>
  <div class="container pt-4">
    <div class="row justify-content-center">
      <div class="col-md-9">
        <form class="d-flex">
          <input class="form-control me-2" type="search" placeholder="Search for a book by title, author, or ISBN"
            aria-label="Search">
          <button class="btn btn btn-outline-dark" type="submit">Search</button>
        </form>
      </div>
    </div>
    <div class="break2"> </div>
    <div class="row">
      <div class="col-lg">
        <div class="section-heading">
          <div class="container"></div>
          <div class="col-md-12"> </div>
          <div class="card"> </div>
          <div class="card-body"></div>
          <div class="row"></div>
          <div class="col-md-12"></div>
          <h4>User profile</h4>
          <div class="container"></div>
          <div class="col-md-12"></div>
          <div class="card">
            <div class="card-body">
              <div class="row">
                <div class="col-md-12">
                  <hr />
                </div>
              </div>
              <div class="row">
                <div class="col-md-12">
                  <form>
                    <div class="form-group row">
                      <label for="username" class="col-4 col-form-label">Account ID*</label>
                      <div class="col-8">
                        <input id="accountid" name="accountid" placeholder="Account ID" class="form-control here"
                          required="required" type="text" />
                      </div>
                    </div>
                    <div class="form-group row">
                      <label for="name" class="col-4 col-form-label">First Name</label>
                      <div class="col-8">
                        <input id="firstname" name="firstname" placeholder="First Name" class="form-control here"
                          type="text" />
                      </div>
                    </div>
                    <div class="form-group row">
                      <label for="lastname" class="col-4 col-form-label">Last Name</label>
                      <div class="col-8">
                        <input id="lastname" name="lastname" placeholder="Last Name" class="form-control here"
                          type="text" />
                      </div>
                    </div>
                    <div class="form-group row">
                      <label for="text" class="col-4 col-form-label">Display Name*</label>
                      <div class="col-8">
                        <input id="displayname" name="displayname" placeholder="Dispaly Name" class="form-control here"
                          required="required" type="text" />
                      </div>
                    </div>
                    <div class="form-group row">
                      <label for="text" class="col-4 col-form-label">School Name*</label>
                      <div class="col-8">
                        <input id="schoolname" name="schoolname" placeholder="school Name" class="form-control here"
                          required="required" type="text" />
                      </div>
                    </div>
                    <!--
                    <div class="form-group row">
                      <label for="select" class="col-4 col-form-label">Program</label>
                      <div class="col-8">
                        <select id="select" name="select" class="custom-select">
                          <option value="none">None</option>
                          <option value="computer system technology">Computer System Technology</option>
                          <option value="software development">Software Development</option>
                          <option value="engineering">Engineering</option>
                          <option value="accounting, finance, and insurance">Accounting, Finance, and Insurance</option>
                          <option value="business administration">Business Administration</option>
                          <option value="human resource management">Human Resource Management</option>
                          <option value="operations management">Operations Management</option>
                          <option value="nursing">Nursing</option>
                          <option value="marketing management">Marketing Management</option>
                          <option value="interior design">Interior Design</option>
                        </select>
                      </div>
                    </div>
                    -->
                    <div class="form-group row">
                      <label for="email" class="col-4 col-form-label">Email*</label>
                      <div class="col-8">
                        <input id="email" name="email" placeholder="Email" class="form-control here" required="required"
                          type="text" />
                      </div>
                    </div>
                    <div class="form-group row">
                      <label for="text" class="col-4 col-form-label">Address</label>
                      <div class="col-8">
                        <input id="address" name="address" placeholder="Address" class="form-control here"
                          type="text"/>
                      </div>
                    </div>
                    <div class="form-group row">
                      <label for="text" class="col-4 col-form-label">Phone Number</label>
                      <div class="col-8">
                        <input oninput="value=value.replace(/[^\d]/g,'')" id="phonenumber" name="phonenumber"
                          placeholder="123-456-7890" minlength="9" maxlength="14" class="form-control here"
                          type="tel" />
                      </div>
                    </div>
                    <!--
                    <div class="form-group row">
                      <label for="publicinfo" class="col-4 col-form-label">Public Info</label>
                      <div class="col-8">
                        <textarea id="publicinfo" name="publicinfo"
                          placeholder="Briefly introduce yourself, ex: your favorite courses or your interests"
                          cols="40" rows="4" class="form-control"></textarea>
                      </div>
                    </div>
                    -->

                    <div class="form-group row">
                      <div class="offset-4 col-8">
                        <button name="reset" type="reset" class="btn btn-primary" style="background-color: red">
                          Reset
                        </button>
                      </div>
                    </div>
                    <div class="form-group row">
                      <div class="offset-4 col-8">
                        <button id="updatemyprofile" class="btn btn-primary">
                          Update My Profile
                        </button>
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- footer -->
        <div class="row py-3">
          <div class="col-md-7">
            <ul class="nav">
              <li class="nav-item">
                <a class="nav-link text-info" href="about.html">Our Team</a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-info" href="contact.html">Contact</a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-info" href="help.html">Help</a>
              </li>

            </ul>
          </div>
          <div class="col-md text-md-right">
            <small>&copy; Website created by Team 19 for COMP 1800 Winter 2021</small>
          </div>
        </div>
      </div>
    </div>
  </div><!-- /footer -->
  <!-- /Container-->
  <!-- JavaScript and dependencies -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
    crossorigin="anonymous"></script>
  <!-- Option 2: Separate Popper and Bootstrap JS -->
  <!--
       <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js" integrity="sha384-KsvD1yqQ1/1+IA7gi3P0tyJcT3vR+NdBTt13hSJ2lnve8agRGXTTyNaBYmCR/Nwi" crossorigin="anonymous"></script>
       <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js" integrity="sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG" crossorigin="anonymous"></script>
       -->


  <!-- TODO: Add SDKs for Firebase products that you want to use
           https://firebase.google.com/docs/web/setup#available-libraries -->

  <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth.js"></script>

  <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
      apiKey: "AIzaSyCrRgYXNRD1vtIPfI2SwAGT0d0GUleayYg",
      authDomain: "comp1800-team19.firebaseapp.com",
      projectId: "comp1800-team19",
      storageBucket: "comp1800-team19.appspot.com",
      messagingSenderId: "10374778089",
      appId: "1:10374778089:web:54394fc2561ca6d1b03478"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);


    const db = firebase.firestore(); //add this to read and write


  </script>

  <script>
    function getBook() {
      document.getElementById("updatemyprofile").addEventListener('click', function () {
        alert('user profile')
        var account_id = document.getElementById("accountid").value;
        var first_name = document.getElementById("firstname").value;
        var last_name = document.getElementById("lastname").value;
        var display_name = document.getElementById("displayname").value;
        var school_name = document.getElementById("schoolname").value;
        var e_mail = document.getElementById("email").value;
        var a_ddress = document.getElementById("address").value;
        var phone_number = document.getElementById("phonenumber").value;

        db.collection("User Profile").doc().set({

          account_id: account_id,
          first_name: first_name,
          last_name: last_name,
          display_name: display_name,
          school_name: school_name,
          address: a_ddress,
          phone_number: phone_number
        })
          .then(() => {
            console.log("Document successfully written!");
          })
          .catch((error) => {
            console.error("Error writing document: ", error);
          });

      })

    }
    getBook();
  </script>
  <script>
    var user = firebase.auth().currentUser;
    var accountid, firstname, lastname, displayname, schoolname, email, address, phonenumber;

    if (user != null) {
      accountid = user.accountid;
      firstname = user.firstname;
      lastname = user.lastname;
      displayname = user.displayname;
      schoolname = user.schoolname;
      email = user.email;
      address = user.address;
      phonenumber = user.phonenumber;
    }
  </script>

  <script>
    var authRef = firebase.auth();
    authRef.onAuthStateChanged(function (user) {
      if (user) {
        console.log('AccountID onAuthStateChanged : ' + user.accountid);
        console.log('first name onAuthStateChanged : ' + user.firstname);
        console.log('Last name onAuthStateChanged : ' + user.lastname);
        console.log('Display name onAuthStateChanged : ' + user.displayname);
        console.log('School name onAuthStateChanged : ' + user.schoolname);
        console.log('Email onAuthStateChanged : ' + user.email);
        console.log('Address onAuthStateChanged : ' + user.address);
        console.log('Phone number onAuthStateChanged : ' + user.phonenumber);
      } else {
        console.log('not login');
      }
    });


    // var userNow = firebase.auth().currentUser;
    // userNow.updateProfile({
    //   accountid: "A01261546. User",
    //   firstname: "Chih-Hao. User",
    //   lastname: "Chen. User",
    //   displayname: "Chih-Hao. User",
    //   schoolname: "BCIT. User",
    //   email: "chen901026@yahoo.com.tw. User",
    //   address: "xxxx city. User",
    //   phonenumber: "1234567890. User",
    // }).then(function () {
    //   var accountid = userNow.accountid;
    //   var firstname = userNow.firstname;
    //   var lastname = userNow.lastname;
    //   var displayname = userNow.displayname;
    //   var schoolname = userNow.schoolname;
    //   var address = userNow.address;
    //   var phonenumber = userNow.phonenumber;
    // }, function (error) {
    //   console.log("update profile error. 1324");
    // });
  </script>

</body>

</html>